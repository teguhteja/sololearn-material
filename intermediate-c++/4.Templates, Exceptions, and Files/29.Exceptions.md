# 29. Exceptions

## Exceptions

Exceptions are used to handle errors and anomalies that occur during program execution. They provide a way to respond to unexpected situations and maintain the flow of the program.

**Examples of exceptions** include:
- Attempting to divide by zero
- Accessing out-of-bounds elements in an array

**In C++**, exceptions are handled using three keywords: `try`, `catch`, and `throw`.

## Throwing Exceptions

The `throw` keyword is used to throw an exception when a problem arises. The type of exception can be any expression, and the type of this expression determines the type of exception thrown.

**Example:**
```cpp
int motherAge = 29;
int sonAge = 36;
if (sonAge > motherAge) {
    throw "Wrong age values"; // Throwing an exception
}
```

## Catching Exceptions

A `try` block identifies a section of code that might throw an exception. It is followed by one or more `catch` blocks, which handle the exception. The `catch` block executes when a specific exception is thrown.

**Example:**
```cpp
#include <iostream>
using namespace std;

int main()
{
    try {
        int motherAge = 29;
        int sonAge = 36;
        if (sonAge > motherAge) {
            throw 99; // Throwing an integer exception
        }
    }
    catch (int x) {
        cout << "Wrong age values - Error " << x; // Handling the integer exception
    }

    return 0;
}
```

## Username Validation Example

To validate a username based on its length and handle exceptions, follow these steps:

1. **Check the length of the username** using the `size()` function.
2. **Throw an exception** if the username is invalid.
3. **Catch the exception** and output "Invalid" if an exception is thrown; otherwise, output "Valid".

Hereâ€™s the complete program:

```cpp
#include <iostream>
#include <stdexcept> // For std::out_of_range exception
using namespace std;

int main() {
    string name;
    cin >> name;

    try {
        // Check username length
        if (name.size() < 4 || name.size() > 20) {
            throw out_of_range("Username length is invalid"); // Throw exception if length is not within valid range
        }
        cout << "Valid" << endl; // Username is valid
    }
    catch (const out_of_range& e) {
        cout << "Invalid" << endl; // Catch exception and output "Invalid"
    }

    return 0;
}
```

### Explanation:

1. **Include the Required Header**:
   - `#include <stdexcept>`: This is needed for the `std::out_of_range` exception.

2. **Input the Username**:
   - `cin >> name;`: Reads the username from the standard input.

3. **Exception Handling**:
   - **Throwing an Exception**: If the username length is less than 4 or more than 20, `throw out_of_range("Username length is invalid");` is used to throw an exception.
   - **Catching the Exception**: The `catch` block catches the `std::out_of_range` exception and outputs "Invalid".

4. **Valid Username**:
   - If no exception is thrown, the username is considered valid, and "Valid" is printed.

This approach ensures robust username validation and proper handling of invalid input.

## Function Example

Define a function `foo` that throws an exception with `-1` if its parameter is greater than 100. Then, handle this exception and print "error!" to the screen.

```cpp
#include <iostream>
using namespace std;

void foo(int arg) {
    try {
        if (arg > 100) {
            throw -1; // Throwing an integer exception
        }
    }
    catch (int x) {
        cout << "error!" << endl; // Handling the integer exception
    }
}

int main() {
    foo(150); // This will trigger the exception
    return 0;
}
```

### Explanation:

1. **Throwing the Exception**:
   - Inside `foo`, if `arg` is greater than 100, `throw -1;` throws an exception of type `int`.

2. **Catching the Exception**:
   - The `catch` block catches the exception and prints "error!" to the screen.
