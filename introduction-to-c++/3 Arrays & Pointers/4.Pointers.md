# 4. Pointers

## Arrays
In the previous lessons, we have seen arrays with a fixed size. Their size needed to be defined when they were created using a constant number.

What if we needed an array that has a size that is a variable? 

For example, imagine a program that takes an image as input and processes it using an array. The image size is only known when the program runs, so we do not know in advance what the size of the array will be.

In these situations, we need to dynamically allocate memory. Let's learn how to do that!

---

## Pointers
In order to learn about dynamic memory, we first need to understand **pointers**.

All variables that you create are stored in the memory. A **pointer** is a variable that stores the memory address of another variable as its value.

It is defined using the asterisk `*` and is declared just like a regular variable:

```cpp
int *p;
```

Now, `p` is a pointer that will point to an integer value in the memory.

Let's learn how to assign it a value!

---

## Assigning Pointers
The address of a variable can be accessed using the `&` operator. For example:

```cpp
#include <iostream>
using namespace std;

int main() {
    int num = 42;
    int *p = &num;

    cout << p;
}
```

The code above creates a pointer `p` and assigns it the memory address of the variable `num`.

Running the code will print a long hexadecimal number that represents the memory address.

### Exercise:
Fill in the blanks to create a pointer to the variable `name`:

```cpp
string name = "James";
string *ptr = &name;
```

---

## Dereferencing Pointers
The asterisk `*` is also used to access the value stored at a memory address. This is called the **dereference operator**.

For example, let's output the value stored at the address to which the pointer `p` points:

```cpp
#include <iostream>
using namespace std;

int main() {
    int num = 42;
    int *p = &num;

    cout << *p;
}
```

This will output the value of the variable to which the pointer points.

### Key Concepts:
- The `&` operator is used to access the memory address of a variable.
- The `*` operator is used to access the value stored at the memory address.
- The same `*` sign is used to declare a pointer, but it is different from the dereference operator.

---

## Changing Values with Pointers
Because a pointer points to the memory address of a variable, we can use it to change the value of that variable:

```cpp
#include <iostream>
using namespace std;

int main() {
    int num = 42;
    int *p = &num;

    *p = 8;

    cout << num;
}
```

This code changes the value of the variable `num` using the pointer `p`. `*p` is essentially an alias for `num`, meaning they represent the same thing.

### Exercise:
What is the output of this code?

```cpp
int a = 4;
int *p = &a;
a += 2;
*p += 3;
a -= 1;
cout << a;
```

---

## Arrays & Pointers
The name of an array is actually a pointer to its first element. Each element can be accessed by incrementing the pointer.

Here’s an example:

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[] = {2, 4, 6, 8};
    int *p = arr;

    cout << *p << endl;
    cout << *(p+1) << endl;
    cout << *(p+2) << endl;
}
```

Note that we used `*p = arr` instead of `&arr`, because the array name is already a pointer to its first element. The dereference operator `*(p+1)` is used to access the incremented address, and the parentheses are important!

### Exercise:
For `int arr[] = {1, 2, 3, 4, 5}; int *ptr = arr;`, which of the following expressions is equivalent to `arr[2]`?

- `ptr + 2`
- `*ptr + 2`
- `*ptr[2]`
- `*(ptr + 2)` ✅

---

## Looping Over Arrays with Pointers
We can use pointers to arrays to loop over them. Here’s an example:

```cpp
#include <iostream>
using namespace std;

int main() {
    int arr[] = {2, 4, 6, 8};
    int *p = arr;

    for(int i = 0; i < 4; i++) {
        cout << *p << endl;
        p++;
    }
}
```

During each iteration of the loop, we simply increment the pointer by 1, making it point to the next element of the array.

---

## Lesson Takeaways
Pointers might seem confusing at first, but here are the key takeaways:

1. A pointer is a variable that stores the memory address of another variable.
2. It is declared using a `*` and the type of the value it points to, for example: `int *p;`.
3. The memory address of a variable can be accessed using the `&` operator and assigned to a pointer: `int *p = &num;`.
4. The value stored at a memory address can be accessed using the `*` operator: `*p`.
5. A pointer can also be assigned to an array and used to access the elements of the array by incrementing the pointer.

We learned about pointers because they are used for **dynamic memory allocation**, which will be covered in the next lesson!
