# 1. Working With Memory

## Memory Management

Understanding memory is an important aspect of C programming. When you declare a variable using a basic data type, C automatically allocates space for the variable in an area of memory called the stack.

An `int` variable, for example, is typically allocated 4 bytes when declared. We know this by using the `sizeof` operator:

```c
#include <stdio.h>

int main() {
    int x;
    printf("%ld", sizeof(x)); /* output: 4 */
    return 0;
}
```

As another example, an array with a specified size is allocated contiguous blocks of memory, with each block the size for one element:

```c
#include <stdio.h>

int main() {
    int arr[10];
    printf("%ld", sizeof(arr)); /* output: 40 */
    return 0;
}
```

As long as your program explicitly declares a basic data type or an array size, memory is automatically managed. However, you might want to implement a program where the array size is undecided until runtime.

Dynamic memory allocation is the process of allocating and freeing memory as needed. Now you can prompt at runtime for the number of array elements and then create an array with that many elements. Dynamic memory is managed with pointers that point to newly allocated blocks of memory in an area called the heap.

In addition to automatic memory management using the stack and dynamic memory allocation using the heap, there is statically managed data in main memory for variables that persist for the lifetime of the program.

Dynamic memory allocation is:

- The process of defining an array.
- The process of allocating and freeing memory as needed.
- The process of declaring function pointers.

## Memory Management Functions

The `stdlib.h` library includes memory management functions.

The statement `#include <stdlib.h>` at the top of your program gives you access to the following functions:

- `malloc(bytes)`: Returns a pointer to a contiguous block of memory that is of size `bytes`.
- `calloc(num_items, item_size)`: Returns a pointer to a contiguous block of memory that has `num_items` items, each of size `item_size` bytes. Typically used for arrays, structures, and other derived data types. The allocated memory is initialized to 0.
- `realloc(ptr, bytes)`: Resizes the memory pointed to by `ptr` to `size` bytes. The newly allocated memory is not initialized.
- `free(ptr)`: Releases the block of memory pointed to by `ptr`.

When you no longer need a block of allocated memory, use the function `free()` to make the block available to be allocated again.

Include the header file which gives access to memory management functions:

```c
#include <stdlib.h>
```
