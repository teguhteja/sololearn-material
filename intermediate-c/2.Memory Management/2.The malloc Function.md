# 2. The `malloc` Function

## The `malloc` Function

The `malloc()` function allocates a specified number of contiguous bytes in memory.

For example:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
  int *ptr;
  ptr = malloc(10 * sizeof(*ptr));  /* a block of 10 ints */
  if (ptr != NULL) {
    *(ptr + 2) = 50;  /* assign 50 to third int */
  }
  printf("3rd elem equals to %d", *(ptr + 2));
  return 0;
}
```

`malloc` returns a pointer to the allocated memory.

Notice that `sizeof` was applied to `*ptr` instead of `int`, making the code more robust should the `*ptr` declaration be changed to a different data type later.

**Run the code and see how it works!**

### Fill in the blanks to allocate 10 bytes of memory:

```c
int* ptr = malloc(10);
```

---

## The `malloc` Function

The allocated memory is contiguous and can be treated as an array. Instead of using brackets `[ ]` to refer to elements, pointer arithmetic is used to traverse the array. You are advised to use `+` to refer to array elements. Using `++` or `+=` changes the address stored by the pointer.

If the allocation is unsuccessful, `NULL` is returned. Because of this, you should include code to check for a `NULL` pointer.

A simple two-dimensional array requires `(rows * columns) * sizeof(datatype)` bytes of memory.

---

## The `free` Function

The `free()` function is a memory management function that is called to release memory. By freeing memory, you make more available for use later in your program.

For example:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {  
  int *ptr;
  ptr = malloc(10 * sizeof(*ptr));  /* a block of 10 ints */
  if (ptr != NULL)
    *(ptr + 2) = 50;  /* assign 50 to third int */
  printf("%d\n", *(ptr + 2));  /* 50 */

  free(ptr);

  return 0;
}
```

### Fill in the blanks to allocate memory and then free the memory allocated by `malloc()`:

```c
int* ptr = malloc(10);
free(ptr);
```
