# 2. Working With Structures

## Structures with Structures 
The members of a structure may also be structures. 

For example, consider the following statements:

```c
#include <stdio.h>

typedef struct {
  int x;
  int y;
} point;

typedef struct {
  float radius;
  point center;
} circle; 

int main() {
    point p;
    p.x = 3;
    p.y = 4;
    
    circle c;
    c.radius = 3.14;
    c.center = p;
    
    printf("Circle radius is %.2f, center is at (%d, %d)", c.radius, c.center.x, c.center.y);
  
    return 0;
}
```

Nested curly braces are used to initialize members that are structs. The dot operator is used twice to access members of members, as in the statements:

```c
#include <stdio.h>

typedef struct {
  int x;
  int y;
} point;

typedef struct {
  float radius;
  point center;
} circle; 

int main() {
    circle c = {4.5, {1, 3}};
    printf("%3.1f %d,%d", c.radius, c.center.x, c.center.y);
    /* 4.5  1,3 */
  
    return 0;
}
```

A struct definition must appear before it can be used inside another struct.

**Fill in the blanks** to declare a structure 'big' having a 'small' structure member named `s`.

```c
typedef struct {
  float b;
} small;

struct big {
  int a;
  small s;
};
```

## Pointers to Structures 
Just like pointers to variables, pointers to structures can also be defined.

```c
struct myStruct *struct_ptr;
```

defines a pointer to the `myStruct` structure.

```c
struct_ptr = &struct_var;
```

stores the address of the structure variable `struct_var` in the pointer `struct_ptr`.

```c
struct_ptr->struct_mem;
```

accesses the value of the structure member `struct_mem`.

For example:

```c
#include <stdio.h>
#include <string.h>

// Student Structure Definition
struct student{
    char name[50];
    int number;
    int age;
};

// Struct pointer as a function parameter
void showStudentData(struct student *st) {
    printf("\nStudent:\n");
    printf("Name: %s\n", st->name);
    printf("Number: %d\n", st->number);
    printf("Age: %d\n", st->age);
}

int main() {
    // New Student Record Creation
    struct student st1;
    struct student st2;
    
    // Filling Student 1 Details
    strcpy(st1.name, "Krishna");
    st1.number = 5;
    st1.age = 21;
    
    // Filling Student 2 Details
    strcpy(st2.name, "Max");
    st2.number = 9;
    st2.age = 15;
    
    // Displaying Student 1 Details
    showStudentData(&st1);
    
    // Displaying Student 2 Details
    showStudentData(&st2);
    
    return 0;
}
```

The `->` operator allows accessing members of the struct through the pointer.

`(*st).age` is the same as `st->age`.

Also, when a typedef has been used to name the struct, then a pointer is declared using only the typedef name along with `*` and the pointer name.

**Fill in the blanks** to declare a pointer to a structure and access the structure members using the pointer:

```c
struct Point {
  int x;
  int y;
} p1;

struct Point *ptr = &p1;
ptr->x = 3;
ptr->y = 4;
```

## Structures as Function Parameters
A function can have structure parameters that accept arguments by value when a copy of the structure variable is all that is needed. 

For a function to change the actual values in a struct variable, pointer parameters are required.

For example:

```c
#include <stdio.h>
#include <string.h>

typedef struct {
    int id;
    char title[40];
    float hours; 
} course;

void update_course(course *class);
void display_course(course class);

int main() {
    course cs2;
    update_course(&cs2);
    display_course(cs2);
    return 0;
}

void update_course(course *class) {
    strcpy(class->title, "C++ Fundamentals");
    class->id = 111;
    class->hours = 12.30;
}

void display_course(course class) {
    printf("%d\t%s\t%3.2f\n", class.id, class.title, class.hours);
} 
```

As you can see, `update_course()` takes a pointer as the parameter, while `display_course()` takes the structure by value.

Run the code and see how it works!

**For a function to change the actual values in a struct variable:**

- Array parameters are required
- No parameters are required
- **Pointer parameters are required**

## Array of Structures 
An array can store elements of any data type, including structures.

After declaring an array of structures, an element is accessible with the index number. 

The dot operator is then used to access members of the element, as in the program:

```c
#include <stdio.h>

typedef struct {
  int h;
  int w;
  int l;
} box;

int main() {
  box boxes[3] = {{2, 6, 8}, {4, 6, 6}, {2, 6, 9}};
  int k, volume;
  
  for (k = 0; k < 3; k++) {
    volume = boxes[k].h * boxes[k].w * boxes[k].l;
    printf("box %d volume %d\n", k, volume);
  }

  return 0;
}
```

Arrays of structures are used for data structures such as linked lists, binary trees, and more.

Run the code and see how it works!

**Fill in the blanks** to declare a point struct and an array of point structures:

```c
struct {
  int x;
  int y;
} point;

point points[3] = {{1, 2}, {3, 4}, {5, 6}};
```
